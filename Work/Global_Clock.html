<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Global Clock</title>
<style>
body{
  font-family:Arial, sans-serif;
  font-size:15px;
  background:#f4f5f7;
  padding:22px;
  line-height:1.35;
  margin:0;
}
h1, .sectionTitle{
  text-align:center;
  margin:0 0 18px 0;
  font-size:22px;
  font-weight:bold;
  background:#003d74;
  color:white;
  padding:12px 16px;
  border-radius:6px;
}

/* default → 3 columns */
#rowA,#convOutGrid{
  display:grid;
  grid-template-columns:repeat(3, minmax(220px,1fr));
  gap:8px 16px;
  margin-bottom:40px;
}

.tzCard{
  background:white;
  border:1px solid #d0d3d6;
  border-radius:6px;
  padding:8px 10px;
  box-shadow:0 1px 3px rgba(0,0,0,0.1);
  font-weight:bold;
  color:#003d74;
  white-space:nowrap;
}
.tzLabel{ display:block; font-size:12px; color:#445; font-weight:600; }
.tzMain{ font-size:15px; color:#003d74; }

/* converter box */
#convBox{
  border:1px solid #ccc;
  border-radius:6px;
  padding:14px;
  width:900px;
  max-width:100%;
  background:white;
  box-shadow:0 2px 4px rgba(0,0,0,0.08);
  margin-bottom:14px;
  margin-left:auto; 
  margin-right:auto; 
}
#convBox { text-align:center; }
#convOutGrid{
  max-width:980px;
  margin:30px auto 40px;
}

/* footer */
#footerNote{
  position:fixed;
  bottom:8px;
  left:12px;
  font-size:12px;
  color:#003d74;
  font-weight:600;
  opacity:0.65;
  pointer-events:none;
}

/* auto change to 2 columns when window gets narrow */
@media (max-width:1300px){
  #rowA,#convOutGrid{
    grid-template-columns:repeat(2, minmax(200px,1fr));
  }
}
</style>
</head>
<body>

<h1>Global Clock</h1>

<div id="rowA"></div>

<div class="sectionTitle">Time Converter</div>

<div id="convBox">
  Time:
  <input id="convTime" type="text" value="00:00" placeholder="HH:MM" style="width:80px;text-align:center;">
  From TZ:
  <select id="convFrom"></select>
  Format:
  <select id="convFormat">
    <option value="24" selected>24H</option>
    <option value="12">12H</option>
  </select>
  <button id="convRunBtn">Convert</button>
  <button id="convNowBtn">Now</button>
</div>

<div id="convOutGrid"></div>

<script>
function tzOffsetAt(utcMs, tz){
  const d = new Date(utcMs);
  const tzDate  = new Date(d.toLocaleString("en-US", { timeZone: tz }));
  const utcDate = new Date(d.toLocaleString("en-US", { timeZone: "UTC" }));
  return tzDate.getTime() - utcDate.getTime();
}
function utcFromWallToday(H, M, fromTZ){
  const now = new Date();
  const y = now.getUTCFullYear();
  const m = now.getUTCMonth();
  const d = now.getUTCDate();
  const guessUTC = Date.UTC(y, m, d, H, M, 0);
  const off = tzOffsetAt(guessUTC, fromTZ);
  return guessUTC - off;
}

/* final sequence */
const CORP_ZONES = [
 ["Asia/Singapore","Singapore"],
 ["Etc/GMT","GMT"],
 ["Asia/Manila","Philippines"],
 ["Asia/Tokyo","Tokyo"],
 ["Asia/Bangkok","Bangkok"],
 ["Australia/Sydney","Sydney"],
 ["Asia/Kolkata","Bengaluru"],
 ["Europe/London","London"],
 ["Europe/Bucharest","Bucharest"],
 ["Europe/Berlin","Frankfurt"],
 ["America/New_York","New York"],
 ["America/Chicago","Chicago"]
];

(function buildRowA(){
  const host=document.getElementById("rowA");
  function tick(){
    const now=Date.now();
    host.innerHTML="";
    for(const [tz,label] of CORP_ZONES){
      const card=document.createElement("div");
      card.className="tzCard";
      card.innerHTML=`<span class="tzMain">${label}: ${
        new Date(now).toLocaleTimeString("en-GB",{hour12:false,timeZone:tz})
      }</span>`;
      host.appendChild(card);
    }
  }
  tick(); setInterval(tick,1000);
})();

/* Converter */
(function(){
  const sel=document.getElementById("convFrom");
  for(const [tz,label] of CORP_ZONES){
    const o=document.createElement("option");
    o.value=tz; o.textContent=label;
    sel.appendChild(o);
  }
  sel.value="Asia/Singapore";

  function runConv(){
    const timeVal=document.getElementById("convTime").value||"00:00";
    const [H,M]=timeVal.split(":").map(Number);
    const fromTZ=sel.value;
    const fmt12=document.getElementById("convFormat").value==="12";
    const utcMs=utcFromWallToday(H,M,fromTZ);

    const grid=document.getElementById("convOutGrid");
    grid.innerHTML="";

    const title=document.createElement("div");
    title.className="tzCard";
    title.style.gridColumn="1 / -1";     // span full row always
    title.textContent=`Converted from ${sel.options[sel.selectedIndex].text} @ ${timeVal}`;
    grid.appendChild(title);

    for(const [tz,label] of CORP_ZONES){
      const inst=new Date(utcMs);
      const dateStr=inst.toLocaleDateString("en-GB",{timeZone:tz});
      const timeStr=inst.toLocaleTimeString("en-US",{hour12:fmt12,timeZone:tz});
      const d=document.createElement("div");
      d.className="tzCard";
      d.innerHTML=`<span class="tzMain">${label}: ${timeStr}</span><br><span class="tzLabel">${dateStr}</span>`;
      grid.appendChild(d);
    }
  }

  document.getElementById("convRunBtn").onclick=runConv;
  document.getElementById("convNowBtn").onclick=()=>{
    const n=new Date();
    document.getElementById("convTime").value=
      `${String(n.getHours()).padStart(2,"0")}:${String(n.getMinutes()).padStart(2,"0")}`;
    runConv();
  };
})();

/* typing support: 930 → 09:30 */
document.getElementById("convTime").addEventListener("input", e=>{
  let v=e.target.value.replace(/\D/g,"");
  if(v.length===3) v="0"+v;
  if(v.length===4) v=v.slice(0,2)+":"+v.slice(2);
  e.target.value=v;
});
</script>

<div id="footerNote">Brought to you by Francis Gonzales</div>

</body>
</html>
