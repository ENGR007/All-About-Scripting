<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Filipino ‚Üî English Translator (HTML Only)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #020617;
      --card: #020617;
      --border: #1f2937;
      --accent: #0ea5e9;
      --accent-soft: rgba(56, 189, 248, 0.15);
      --text: #e5e7eb;
      --muted: #9ca3af;
      --danger: #fecaca;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 14px;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1f2937 0, #020617 50%, #020617 100%);
      color: var(--text);
    }

    .app {
      max-width: 900px;
      margin: 0 auto;
      background: var(--card);
      border-radius: 16px;
      padding: 16px;
      border: 1px solid var(--border);
      box-shadow: 0 20px 45px rgba(0,0,0,0.65);
    }

    h1 {
      font-size: 1.2rem;
      margin: 0 0 6px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    h1 span.icon { font-size: 1.3rem; }

    .subtitle {
      font-size: 0.8rem;
      color: var(--muted);
      margin-bottom: 10px;
    }

    .row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 10px;
    }

    @media (max-width: 720px) {
      .row { grid-template-columns: 1fr; }
    }

    .field-label {
      font-size: 0.8rem;
      color: var(--muted);
      margin-bottom: 4px;
      display: flex;
      justify-content: space-between;
      align-items: baseline;
    }

    select {
      width: 100%;
      padding: 6px 8px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #020617;
      color: var(--text);
      font-size: 0.82rem;
      outline: none;
    }

    select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px var(--accent-soft);
    }

    textarea {
      width: 100%;
      min-height: 140px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: #020617;
      color: var(--text);
      padding: 8px;
      font-size: 0.9rem;
      resize: vertical;
      line-height: 1.4;
    }

    textarea:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 1px var(--accent-soft);
    }

    .swap-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-top: 6px;
      flex-wrap: wrap;
    }

    .swap-btn {
      border: 1px solid var(--border);
      border-radius: 999px;
      background: #020617;
      color: var(--text);
      font-size: 0.8rem;
      padding: 4px 10px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    .swap-btn:active { transform: scale(0.97); }

    .pill {
      font-size: 0.7rem;
      border-radius: 999px;
      padding: 3px 8px;
      background: var(--accent-soft);
      border: 1px solid rgba(56, 189, 248, 0.5);
      color: #bae6fd;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .status {
      margin-top: 10px;
      font-size: 0.75rem;
      color: var(--muted);
      display: flex;
      justify-content: space-between;
      gap: 6px;
      flex-wrap: wrap;
    }

    .status span.right { text-align: right; }

    .error {
      margin-top: 4px;
      min-height: 16px;
      font-size: 0.78rem;
      color: var(--danger);
    }

    .btn-row {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      flex-wrap: wrap;
    }

    button {
      border: none;
      border-radius: 999px;
      padding: 7px 12px;
      font-size: 0.82rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    button:active { transform: scale(0.97); }

    .btn-primary {
      background: linear-gradient(135deg, #0ea5e9, #38bdf8);
      color: #0b1120;
    }

    .btn-secondary {
      background: #020617;
      border: 1px solid var(--border);
      color: var(--text);
    }
  </style>
</head>
<body>
  <div class="app">
    <h1>
      <span class="icon">üåê</span>
      Filipino ‚Üî English Translator
    </h1>
    <div class="subtitle">
      Type or paste text in Filipino or English. The translation appears automatically.
      Runs entirely in your browser using free online translation services.
    </div>

    <div class="swap-row">
      <div class="pill">
        Mode: <span id="modeLabel">Filipino ‚Üí English</span>
      </div>
      <button type="button" class="swap-btn" id="btnSwap">
        ‚áÑ Swap directions
      </button>
    </div>

    <div class="row">
      <div>
        <div class="field-label">
          <span id="sourceLabel">Source (Filipino)</span>
        </div>
        <textarea id="sourceText" placeholder="Mag-type ng Filipino dito‚Ä¶"></textarea>
      </div>
      <div>
        <div class="field-label">
          <span id="targetLabel">Translation (English)</span>
        </div>
        <textarea id="targetText" placeholder="English translation will appear here‚Ä¶" readonly></textarea>
      </div>
    </div>

    <div class="btn-row">
      <button type="button" class="btn-primary" id="btnCopy">
        üìã Copy translation
      </button>
      <button type="button" class="btn-secondary" id="btnClear">
        üßπ Clear
      </button>
    </div>

    <div class="status">
      <span id="statusText">Status: Idle</span>
      <span class="right">Engine: Google (fallback to MyMemory if needed)</span>
    </div>
    <div class="error" id="errorBox"></div>
  </div>

  <script>
    const sourceText  = document.getElementById("sourceText");
    const targetText  = document.getElementById("targetText");
    const statusText  = document.getElementById("statusText");
    const errorBox    = document.getElementById("errorBox");
    const btnSwap     = document.getElementById("btnSwap");
    const btnClear    = document.getElementById("btnClear");
    const btnCopy     = document.getElementById("btnCopy");
    const modeLabel   = document.getElementById("modeLabel");
    const sourceLabel = document.getElementById("sourceLabel");
    const targetLabel = document.getElementById("targetLabel");

    // true = Filipino ‚Üí English, false = English ‚Üí Filipino
    let modeFilToEng = true;
    let debounceTimer = null;

    function updateLabels() {
      if (modeFilToEng) {
        modeLabel.textContent   = "Filipino ‚Üí English";
        sourceLabel.textContent = "Source (Filipino)";
        targetLabel.textContent = "Translation (English)";
        sourceText.placeholder  = "Mag-type ng Filipino dito‚Ä¶";
        targetText.placeholder  = "English translation will appear here‚Ä¶";
      } else {
        modeLabel.textContent   = "English ‚Üí Filipino";
        sourceLabel.textContent = "Source (English)";
        targetLabel.textContent = "Translation (Filipino)";
        sourceText.placeholder  = "Type English here‚Ä¶";
        targetText.placeholder  = "Lalabas dito ang salin sa Filipino‚Ä¶";
      }
    }

    updateLabels();

    btnSwap.addEventListener("click", () => {
      modeFilToEng = !modeFilToEng;
      const currentSource = sourceText.value;
      const currentTarget = targetText.value;

      // Swap contents
      sourceText.value = currentTarget;
      targetText.value = currentSource;

      updateLabels();
      triggerTranslate();
    });

    btnClear.addEventListener("click", () => {
      sourceText.value = "";
      targetText.value = "";
      errorBox.textContent = "";
      statusText.textContent = "Status: Idle";
    });

    btnCopy.addEventListener("click", async () => {
      const text = targetText.value.trim();
      if (!text) {
        errorBox.textContent = "Nothing to copy.";
        return;
      }
      try {
        await navigator.clipboard.writeText(text);
        errorBox.textContent = "";
        statusText.textContent = "Status: Translation copied to clipboard.";
      } catch (e) {
        errorBox.textContent = "Clipboard not available. Please select and copy manually.";
      }
    });

    sourceText.addEventListener("input", () => {
      triggerTranslate();
    });

    function triggerTranslate() {
      if (debounceTimer) clearTimeout(debounceTimer);
      debounceTimer = setTimeout(doTranslate, 400); // debounce for smoother typing
    }

    async function doTranslate() {
      const text = sourceText.value.trim();
      targetText.value = "";

      if (!text) {
        statusText.textContent = "Status: Idle";
        errorBox.textContent = "";
        return;
      }

      const sl = modeFilToEng ? "tl" : "en";
      const tl = modeFilToEng ? "en" : "tl";

      statusText.textContent = "Status: Translating‚Ä¶";
      errorBox.textContent = "";

      try {
        // Try Google unofficial first
        const googleResult = await translateWithGoogle(text, sl, tl);
        if (googleResult) {
          targetText.value = googleResult;
          statusText.textContent = "Status: Translated via Google.";
          return;
        }

        // Fallback to MyMemory
        const mmResult = await translateWithMyMemory(text, sl, tl);
        targetText.value = mmResult || "";
        statusText.textContent = "Status: Translated via MyMemory (fallback).";
      } catch (err) {
        console.error(err);
        errorBox.textContent = "Translation error: " + err.message;
        statusText.textContent = "Status: Error.";
      }
    }

    // ---- Google unofficial translate API (simple, but can rate limit) ----
    async function translateWithGoogle(text, sourceLang, targetLang) {
      const url =
        "https://translate.googleapis.com/translate_a/single?client=gtx" +
        "&sl=" + encodeURIComponent(sourceLang) +
        "&tl=" + encodeURIComponent(targetLang) +
        "&dt=t&q=" + encodeURIComponent(text);

      const res = await fetch(url);
      if (!res.ok) {
        // e.g. rate limiting or blocked
        return "";
      }
      const data = await res.json();
      // data[0] is an array of [ [translatedText, originalText, ...], ... ]
      if (!data || !Array.isArray(data[0])) return "";
      return data[0].map(part => part[0]).join("");
    }

    // ---- MyMemory public API as fallback ----
    async function translateWithMyMemory(text, sourceLang, targetLang) {
      const url =
        "https://api.mymemory.translated.net/get?q=" +
        encodeURIComponent(text) +
        "&langpair=" +
        encodeURIComponent(sourceLang) +
        "|" +
        encodeURIComponent(targetLang);

      const res = await fetch(url);
      if (!res.ok) {
        throw new Error("MyMemory HTTP " + res.status);
      }
      const data = await res.json();
      if (data && data.responseData && data.responseData.translatedText) {
        return data.responseData.translatedText;
      }
      return "";
    }
  </script>
</body>
</html>